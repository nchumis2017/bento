<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>大螢幕</title>
    <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
    <script type="text/javascript" src="https://code.jquery.com/jquery-3.2.1.min.js"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/materialize/0.99.0/css/materialize.min.css" />
    <script src="https://cdnjs.cloudflare.com/ajax/libs/materialize/0.99.0/js/materialize.min.js"></script>
    <script src="https://www.gstatic.com/firebasejs/4.6.2/firebase.js"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/limonte-sweetalert2/7.0.7/sweetalert2.css">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/limonte-sweetalert2/7.0.7/sweetalert2.all.js"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/animate.css/3.5.2/animate.min.css">
    <script>
        $(document).ready(function () {

            $('select').material_select();
            $('.modal').modal();
            // $('.carousel').carousel();
            $('.carousel.carousel-slider').carousel({ fullWidth: true});
            var token_type = ['1P', '2P', '3P', '4P', '5P'];
            var i = 0;
            $('#show_token_type').append('<h3>' + token_type[i] + '</h3>');
            
            setInterval(function(){
                $('#show_token_type').empty();
                $('.carousel').carousel('next');
                i++;
                i %= 5;
                $('#show_token_type').append('<h3>'+token_type[i]+'</h3>');
            }, 4000);
            
        });
    </script>
    <style>
        :root {
            --token-width: 200px;
            --token-height: 200px;

        }

        body {
            background-color: #ffcc80
        }

        .token {
            display: inline-block;
            width: var(--token-width);
            height: var(--token-height);
            background-color: #bbdefb;
            border-radius: 100%;
            text-align: center;
            box-shadow: 0 0 30px #424242;
            position: relative;
            transform:translateY(50%);
            
            
        }

        .token span {
            line-height: var(--token-height);
            font-size: 40px;
        }
    </style>
</head>

<body>

    <script>
        var config = {
            apiKey: "AIzaSyDd2rFHwPXyIkq0iRSinBBfzg31NYJLapE",
            authDomain: "nchumis2017-5566.firebaseapp.com",
            databaseURL: "https://nchumis2017-5566.firebaseio.com",
            projectId: "nchumis2017-5566",
            storageBucket: "nchumis2017-5566.appspot.com",
            messagingSenderId: "501160127423"
        };
        firebase.initializeApp(config);
        var database = firebase.database();
    </script>
    <nav>
        <div class="nav-wrapper">
            <a href="#" class="brand-logo">Logo</a>
            <ul id="nav-mobile" class="right hide-on-med-and-down">
                <li>
                    <a href="sass.html">Sass</a>
                </li>
                <li>
                    <a href="badges.html">Components</a>
                </li>
                <li>
                    <a href="collapsible.html">JavaScript</a>
                </li>
            </ul>
        </div>
    </nav>
    <script>
        queueRef = database.ref("/Queue");

        // Test
        // var test = {
        //     "1P": 12,
        //     "2P": 3,
        //     "3P": 15, 
        //     "4P": 6, 
        //     "5P": 14
        // };
        // queueRef.child("call").set(test); 


        callRef = database.ref("/Queue/call");
        callRef.on('value', function(snapshot){
        var obj = snapshot.val();
            for(var i = 1; i <= 5; i++){
                if (obj[i+'P'] == undefined)
                {
                    $('#show_'+i+'P').append('<div class="token "><span>暫無人排隊</span></div>');
                    $('#p'+i+'_show').append('暫無人排隊');

                }
                else
                {
                    $('#show_' + i + 'P').empty();
                    $('#p' + i + '_show').empty();
                    $('#show_' + i + 'P').append('<div class="token"><span>'+obj[i+'P']+'</span></div>');                    
                    $('#p' + i + '_show').append(obj[i + 'P']);

                } 
            }
        });
    </script>
    <div class="row"></div>
    <div class="row">
        <div class="col s2 m1 l1 " id="show_token_type"></div>
        <div class="col m1 l1"></div>
        <div class="col s10 m8 l8" id="show_token">
            
            <div class="carousel carousel-slider center" data-indicators="true">
                <div class="carousel-fixed-item center">
                    <!-- <a class="btn waves-effect white grey-text darken-text-2">button</a> -->
                </div>
                <div class="carousel-item red white-text" href="#one!" id="show_1P">
                    
                    <!-- <h2>First Panel</h2> -->
                    <!-- <p class="white-text">This is your first panel</p> -->
                </div>
                <div class="carousel-item amber white-text" href="#two!" id="show_2P">
                    <!-- <h2>Second Panel</h2> -->
                    <!-- <p class="white-text">This is your second panel</p> -->
                </div>
                <div class="carousel-item green white-text" href="#three!" id="show_3P">
                    <!-- <h2>Third Panel</h2> -->
                    <!-- <p class="white-text">This is your third panel</p> -->
                </div>
                <div class="carousel-item blue white-text" href="#four!" id="show_4P">
                    <!-- <h2>Fourth Panel</h2> -->
                    <!-- <p class="white-text">This is your fourth panel</p> -->
                </div>
                <div class="carousel-item orange white-text" href="#five!" id="show_5P">
                    <!-- <h2>Fifth Panel</h2> -->
                    <!-- <p class="white-text">This is your fourth panel</p> -->
                </div>
            </div>
        </div>
        
    </div>
    


    <div class="row">
        <div class="col s1 m1 l1"></div>
        <div class="col s12 m2 l2">
            <div class="card blue-grey darken-1">
                <div class="card-content white-text">
                    <span class="card-title">1人</span>
                    <h2 id="p1_show"></h2>
                    
                </div>

            </div>
        </div>
        <div class="col s12 m2 l2">
            <div class="card blue-grey darken-1">
                <div class="card-content white-text">
                    <span class="card-title">2人</span>
                    <h2 id="p2_show"></h2>

                </div>
            </div>
        </div>
        <div class="col s12 m2 l2">
            <div class="card blue-grey darken-1">
                <div class="card-content white-text">
                    <span class="card-title">3人</span>
                    <h2 id="p3_show"></h2>
                    
                </div>
        
            </div>
        </div>
        <div class="col s12 m2 l2">
            <div class="card blue-grey darken-1">
                <div class="card-content white-text">
                    <span class="card-title">4人</span>
                    <h2 id="p4_show"></h2>
                    
                </div>
        
            </div>
        </div>
        <div class="col s12 m2 l2">
            <div class="card blue-grey darken-1">
                <div class="card-content white-text">
                    <span class="card-title">5人</span>
                    <h2 id="p5_show"></h2>
                    
                </div>
        
            </div>
        </div>
    </div>

</body>

</html>